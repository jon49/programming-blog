<!-- {"description":"", "title":"Functional Immutability in JavaScript", "subtitle":""} -->

<p>This is taken from Michael Fogus’ book <em>Functional JavaScript</em> in the chapter <em>Purity, Immutability, and Policies for Change</em>.</p>
<p>Immutability is impossible to achieve in JavaScript without using <code>Object.freeze</code> but it only performs makes the object immutable shallowing, you have to roll your own <code>deepFreeze</code> if you would like to make the object truly immutable.</p>
<p>So there are some practices you can do to make your functions and variables perform in a more immutable manner.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> SaferQueue = <span class="kw">function</span>(elems) {
  <span class="kw">this</span>.<span class="fu">_q</span> = <span class="ot">_</span>.<span class="fu">clone</span>(elems);
}</code></pre>
<p>If you need to you can use a <code>deepClone</code> instead.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">SaferQueue</span>.<span class="fu">prototype</span> = {
  <span class="dt">enqueue</span>: <span class="kw">function</span>(thing) {
    <span class="kw">return</span> <span class="kw">new</span> <span class="fu">SaferQueue</span>(<span class="fu">cat</span>(<span class="kw">this</span>.<span class="fu">_q</span>, [thing]));
  }
};</code></pre>
<p>Where <code>cat</code> concatenates two arrays without changing the values of the original arrays.</p>
<p>And don’t forget to encapsulate the <code>object</code> instatiation behind a function.</p>

<p class="post-meta pure-u-1">
Posted May 29, 2014
 - 
<span class="post-tag">functional programming</span>
<span class="post-tag">immutability</span>
</p>
